---
slides:
  title: ETL
---

# ETL

Exemplos AID/SPLOR

<!--s-->

## O que √© ETL?

üëâ ETL √© o caminho que o dado percorre at√© se tornar informa√ß√£o √∫til.

Note:

- Integrar dados de diferentes fontes para aprimorar a **tomada de decis√£o**.

<!--v-->

## O que √© ETL?

- **Extract (Extrair)**: Coletar dados das fontes.
- **Transform (Transformar)**: Tratar, padronizar e enriquecer os dados.
- **Load (Carregar)**: Armazenar os dados prontos em um destino final.

<!--v-->

## O que √© ETL?

Por que ETL √© necess√°rio?

Note:

- Os dados n√£o nascem prontos para an√°lise.
- Est√£o em m√∫ltiplos sistemas/planilhas/fontes.
- Com formatos (nomes) diferentes.
- Pensados para uso **operacional**, n√£o anal√≠tico ([OLTP x OLAP](https://stackoverflow.com/questions/21900185/what-are-oltp-and-olap-and-what-is-the-difference-between-them)).

<!--v-->

## O que √© ETL?

Quais problemas enfrentamos sem processos de ETL?

Note:

- Cada nova an√°lise vira um retrabalho.
- Relat√≥rios que n√£o batem entre si.
- Tempo excessivo gasto "arrumando dados" manualmente.
- Dificuldade para reproduzir an√°lises (falta de documenta√ß√£o).
- Decis√µes baseadas em dados incompletos ou incorretos

<!--v-->

## O que √© ETL?

Contexto SPLOR:

- **Extract (Extrair)**: Coletar dados SISOR, SIAFI, SIAD.
- **Transform (Transformar)**: Padronizar nome de campos (UO - Unidade or√ßament√°ria)
- **Load (Carregar)**: [Relat√≥rio operacional](http://200.198.9.184/Qlikview/index.htm).

Note:

- Reposit√≥rios GitHub iniciados com [dados](https://github.com/orgs/splor-mg/repositories?q=dados).
- Aqui, vale a leitura do Issue [Estudar viabilidade de simplificar c√≥digos reposit√≥rios ETL](https://github.com/splor-mg/atividades/issues/148).

<!--v-->

## O que √© ETL?

Contexto SPLOR:

![bagunca](https://images.pexels.com/photos/5185074/pexels-photo-5185074.jpeg)

Note:

- Tecnologias:
  - [Make](https://swcarpentry.github.io/make-novice/) para rodar comandos.
  - R.
  - Python.
  - [The Data Package Standard](https://datapackage.org/overview/introduction/).
  - Padr√£o frictionless de documenta√ß√£o
  - Docker para instalar tudo.
  - GitHub Actions para rodar em n√∫vem.
- Aqui, vale a leitura [deste coment√°rio](https://github.com/splor-mg/atividades/issues/148#issuecomment-3587256329) no Issue [Estudar viabilidade de simplificar c√≥digos reposit√≥rios ETL](https://github.com/splor-mg/atividades/issues/148), j√° citado, para entender um pouco mais esta divis√£o de responsabilidades.

<!--s-->

## Extract

Tirar os dados de onde eles vivem.

Note:

- Acessar as fontes corretas.
- Extrair os dados necess√°rios.
- Os dados s√£o lidos, n√£o alterados.
- Garantir que a extra√ß√£o seja confi√°vel e repet√≠vel.

<!--v-->

## Extract

üí° Em ambientes reais, raramente existe uma √∫nica fonte.

Note:

- Bancos de dados relacionais (PostgreSQL, Oracle, MySQL).
- Planilhas (Excel, CSV).
- APIs (sistemas externos, servi√ßos web).
- Arquivos de texto ou logs.
- SISOR, SIAFI, SIAD, Excel, CSV.

<!--v-->

## Extract

O que N√ÉO √© responsabilidade do Extract?

Note:

- Corrigir erros de dados (Transform).
- Padronizar formatos (Transform).
- Criar m√©tricas (Transform).
- Regras de neg√≥cio complexas (Transform).

<!--v-->

## Extract

üí° Se a extra√ß√£o falhar, todo o ETL falha.

Note:

- A qualidade do ETL come√ßa no Extract.

<!--v-->

## Extract

Contexto SPLOR:

- Target `make extract` chama comando `extract` existente no arquivo `main.py` (CLI).
- Comando `extract` chama o script `extract_resource` no arquivo `scripts.extract`.
- Script `extract_resource` chama o script do arquivo `scripts/extract.R` (R).

<!--v-->

## Extract

Contexto SPLOR:

![m√£o na massa](https://images.pexels.com/photos/3218467/pexels-photo-3218467.jpeg)

<!--v-->

## Extract

Contexto SPLOR:

```bash
# clona reposit√≥rio
git clone git@github.com:splor-mg/dados-armazem-siafi-2025.git
cd dados-armazem-siafi-2025

# Acessa docker para rodar o comando de extra√ß√£o
docker run -it --rm --mount type=bind,source=$PWD,target=/project splormg/dados-armazem-siafi-2025 bash
make extract

# Sai do container
exit

# Verifica modifica√ß√£o dos arquivos extra√≠dos
git status
```

Note:

- Instalar Docker.
- Necess√°rio cadastrar credenciais gmail.

<!--
TODO:

Falar da frictionless, em todas as fases




-->
